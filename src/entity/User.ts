/**
 * Сущность User (Пользователь)
 * 
 * Определяет структуру таблицы пользователей в базе данных.
 * Хранит данные для аутентификации (email и хешированный пароль)
 * и имеет связь один-ко-многим с задачами (todos).
 */

// Импорт декораторов TypeORM для определения структуры таблицы
import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, OneToMany } from 'typeorm';
// Импорт сущности Todo для связи один-ко-многим
import { Todo } from './Todo';

/**
 * Декоратор Entity указывает, что класс представляет таблицу 'users' в БД
 */
@Entity('users')
export class User {
  /**
   * Уникальный идентификатор пользователя
   * Генерируется автоматически как UUID при создании записи
   */
  @PrimaryGeneratedColumn('uuid')
  id!: string;

  /**
   * Email пользователя
   * Должен быть уникальным (не может быть двух пользователей с одинаковым email)
   * Используется для входа в систему
   */
  @Column({ unique: true })
  email!: string;

  /**
   * Хешированный пароль пользователя
   * Пароль хранится в хешированном виде для безопасности
   * Не хранится в открытом виде
   */
  @Column()
  password!: string;

  /**
   * Дата и время регистрации пользователя
   * Автоматически устанавливается при создании записи
   */
  @CreateDateColumn()
  createdAt!: Date;

  /**
   * Связь один-ко-многим с сущностью Todo
   * OneToMany означает, что один пользователь может иметь много задач
   * Второй параметр указывает обратную связь в Todo (todo.user)
   */
  @OneToMany(() => Todo, (todo) => todo.user)
  todos!: Todo[];
}
